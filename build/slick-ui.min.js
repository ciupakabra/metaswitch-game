var SlickUI={namespace:function(t){var e=t.split("."),i=SlickUI;for(var n in e){var r=e[n];i=i[r]=i[r]?i[r]:{}}return SlickUI[t]}};Phaser.Plugin.SlickUI=function(t,e){Phaser.Plugin.call(this,t,e),this.defaultRenderer={button:"SlickUI.Element.Renderer.ButtonRenderer",checkbox:"SlickUI.Element.Renderer.CheckboxRenderer",panel:"SlickUI.Element.Renderer.PanelRenderer",slider:"SlickUI.Element.Renderer.SliderRenderer",text_field:"SlickUI.Element.Renderer.TextFieldRenderer",keyboard:"SlickUI.Element.Renderer.KeyboardRenderer",key:"SlickUI.Element.Renderer.KeyRenderer"},this.renderer={}},Phaser.Plugin.SlickUI.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.SlickUI.prototype.constructor=Phaser.Plugin.SamplePlugin,Phaser.Plugin.SlickUI.prototype.load=function(t){this.container=new SlickUI.Container.Container(this);var e=t.replace(/\/[^\/]+$/,"/");this.game.load.json("slick-ui-theme",t),this.game.load.resetLocked=!0,this.game.load.start();var i=!1,n=function(){if(this.game.cache.checkJSONKey("slick-ui-theme")&&!i){var t=this.game.cache.getJSON("slick-ui-theme");for(var r in t.images)this.game.load.image("slick-ui-"+r,e+t.images[r]);for(r in t.fonts)this.game.load.bitmapFont(r,e+t.fonts[r][0],e+t.fonts[r][1]);i=!0,this.game.load.onFileComplete.remove(n)}};this.game.load.onFileComplete.add(n,this)},Phaser.Plugin.SlickUI.prototype.add=function(t){return this.container.add(t)},Phaser.Plugin.SlickUI.prototype.getRenderer=function(t){if(void 0!==this.renderer[t])return this.renderer[t];var e=this.game.cache.getJSON("slick-ui-theme"),i=function(t){var e=t.split("."),i=window;for(var n in e)i=i[e[n]];return i};if(void 0===e.renderer||void 0===e.renderer[t]){if(void 0===this.defaultRenderer[t])throw new Error("Trying to access undefined renderer '"+t+"'.");return this.renderer[t]=new(i(this.defaultRenderer[t]))(this.game)}return this.renderer[t]=new(i(e.renderer[t]))(this.game)},SlickUI.namespace("Container"),SlickUI.Container.Container=function(t){this.root=null,t instanceof SlickUI.Container.Container||(this.root=t,t=null),this.parent=t,this.children=[],t?(this.root=t.root,this.displayGroup=this.root.game.add.group(),t.displayGroup.add(this.displayGroup),this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height):(this.displayGroup=this.root.game.add.group(),this.x=0,this.y=0,this.width=this.root.game.width,this.height=this.root.game.height)},SlickUI.Container.Container.prototype.add=function(t){return t.setContainer(this),"function"==typeof t.init&&t.init(),this.root.game.world.bringToTop(this.displayGroup),this.children.push(t),t},SlickUI.Container.Container.prototype.remove=function(t){t.unsetContainer();var e=this.children.indexOf(t);e>-1&&this.children.splice(e,1),t.destroy()},SlickUI.Container.Container.prototype.removeParent=function(){this.parent?this.parent.displayGroup.remove(this.displayGroup):this.root&&this.root.game.world.remove(this.displayGroup),this.root=void 0,this.parent=void 0},SlickUI.Container.Container.prototype.destroy=function(){this.removeParent(),this.displayGroup.destroy()},SlickUI.namespace("Element"),SlickUI.Element.Button=function(t,e,i,n){this._x=t,this._y=e,this._offsetX=t,this._offsetY=e,this._width=i,this._height=n,this.container=null},SlickUI.Element.Button.prototype.setContainer=function(t){this.container=new SlickUI.Container.Container(t)},SlickUI.Element.Button.prototype.unsetContainer=function(){this.container.removeParent()},SlickUI.Element.Button.prototype.init=function(){var t=this.container.root.game.cache.getJSON("slick-ui-theme"),e=this.container.x=this.container.parent.x+this._x,i=this.container.y=this.container.parent.y+this._y,n=this.container.width=Math.min(this.container.parent.width-this._x,this._width),r=this.container.height=Math.min(this.container.parent.height-this._y,this._height);this.container.x+=Math.round(t.button["border-x"]/2),this.container.y+=Math.round(t.button["border-y"]/2),this.container.width-=t.button["border-x"],this.container.height-=t.button["border-y"];var o=this.container.root.getRenderer("button").render(n,r);this.spriteOff=o[0],this.spriteOn=o[1],this.sprite=this.container.root.game.make.button(e,i),this.sprite.loadTexture(this.spriteOff.texture),this.container.displayGroup.add(this.sprite),this.sprite.x=e,this.sprite.y=i,this._offsetX=e,this._offsetY=i,this.sprite.fixedToCamera=!0;var s=!1;this.sprite.events.onInputOver.add(function(){s=!0},this),this.sprite.events.onInputOut.add(function(){s=!1},this),this.sprite.events.onInputDown.add(function(){this.sprite.loadTexture(this.spriteOn.texture)},this),this.sprite.events.onInputUp.add(function(){this.sprite.loadTexture(this.spriteOff.texture),s||this.sprite.events.onInputUp.halt()},this),this.events=this.sprite.events},SlickUI.Element.Button.prototype.add=function(t){return this.container.add(t)},SlickUI.Element.Button.prototype.destroy=function(){this.container.destroy()},Object.defineProperty(SlickUI.Element.Button.prototype,"x",{get:function(){return this._x-this.container.parent.x},set:function(t){this._x=t,this.container.displayGroup.x=this.container.parent.x+t-this._offsetX}}),Object.defineProperty(SlickUI.Element.Button.prototype,"y",{get:function(){return this._y-this.container.parent.y},set:function(t){this._y=t,this.container.displayGroup.y=this.container.parent.y+t-this._offsetY}}),Object.defineProperty(SlickUI.Element.Button.prototype,"visible",{get:function(){return this.container.displayGroup.visible},set:function(t){this.container.displayGroup.visible=t}}),Object.defineProperty(SlickUI.Element.Button.prototype,"alpha",{get:function(){return this.container.displayGroup.alpha},set:function(t){this.container.displayGroup.alpha=t}}),Object.defineProperty(SlickUI.Element.Button.prototype,"width",{get:function(){return this.container.width},set:function(t){var e=this.container.root.game.cache.getJSON("slick-ui-theme");this._width=Math.round(t+e.button["border-x"]),this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),Object.defineProperty(SlickUI.Element.Button.prototype,"height",{get:function(){return this.container.height},set:function(t){var e=this.container.root.game.cache.getJSON("slick-ui-theme");this._height=Math.round(t+e.button["border-y"]),this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),SlickUI.namespace("Element"),SlickUI.Element.Checkbox=function(t,e,i){this._x=t,this._y=e,this.container=null,this._checked=!1,this.type=i,void 0===i&&(this.type=SlickUI.Element.Checkbox.TYPE_CHECKBOX)},SlickUI.Element.Checkbox.TYPE_CHECKBOX=0,SlickUI.Element.Checkbox.TYPE_RADIO=1,SlickUI.Element.Checkbox.TYPE_CROSS=2,SlickUI.Element.Checkbox.prototype.setContainer=function(t){this.container=t},SlickUI.Element.Checkbox.prototype.unsetContainer=function(){this.container.removeParent()},SlickUI.Element.Checkbox.prototype.init=function(){var t,e=this.container.x+this._x,i=this.container.y+this._y;switch(this.type){case SlickUI.Element.Checkbox.TYPE_RADIO:t="radio";break;case SlickUI.Element.Checkbox.TYPE_CROSS:t="cross";break;default:t="check"}var n=this.container.root.getRenderer("checkbox").render(t);this.sprite=this.container.root.game.make.sprite(0,0,n[0].texture),this.sprite.x=e,this.sprite.y=i,this._spriteOff=n[0],this._spriteOn=n[1],this.displayGroup=this.container.root.game.add.group(),this.displayGroup.add(this.sprite),this.container.displayGroup.add(this.displayGroup),this.sprite.inputEnabled=!0,this.sprite.fixedToCamera=!0,this.input.useHandCursor=!0,this.events.onInputDown.add(function(){this.checked=!this.checked},this)},SlickUI.Element.Checkbox.prototype.destroy=function(){this.container.destroy()},Object.defineProperty(SlickUI.Element.Checkbox.prototype,"x",{get:function(){return this.displayGroup.x+this._x},set:function(t){this.displayGroup.x=t-this._x}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"y",{get:function(){return this.displayGroup.y+this._y},set:function(t){this.displayGroup.y=t-this._y}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t,t?this.sprite.loadTexture(this._spriteOn.texture):this.sprite.loadTexture(this._spriteOff.texture)}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"visible",{get:function(){return this.sprite.visible},set:function(t){this.sprite.visible=t}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"alpha",{get:function(){return this.sprite.alpha},set:function(t){this.sprite.alpha=t}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"events",{get:function(){return this.sprite.events}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"input",{get:function(){return this.sprite.input}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"width",{get:function(){return this.sprite.width},set:function(t){this.sprite.width=t}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"height",{get:function(){return this.sprite.height},set:function(t){this.sprite.height=t}}),SlickUI.namespace("Element"),SlickUI.Element.DisplayObject=function(t,e,i,n,r){this._x=t,this._y=e,this._offsetX=t,this._offsetY=e,this.displayObject=i,this.container=null,this._width=n,this._height=r},SlickUI.Element.DisplayObject.prototype.setContainer=function(t){this.container=new SlickUI.Container.Container(t),void 0===this._width&&(this._width=this.container.root.game.width),void 0===this._height&&(this._height=this.container.root.game.height)},SlickUI.Element.DisplayObject.prototype.unsetContainer=function(){this.container.removeParent()},SlickUI.Element.DisplayObject.prototype.init=function(){var t=this.container.x=this.container.parent.x+this._x,e=this.container.y=this.container.parent.y+this._y;this.container.width=Math.min(this.container.parent.width-this._x,this._width),this.container.height=Math.min(this.container.parent.height-this._y,this._height),!this.displayObject instanceof Phaser.Sprite?this.sprite=this.container.root.game.make.sprite(t,e,this.displayObject):this.sprite=this.displayObject,this.container.displayGroup.add(this.sprite),this.sprite.x=t,this.sprite.y=e,this._offsetX=t,this._offsetY=e,this.sprite.fixedToCamera=!0},SlickUI.Element.DisplayObject.prototype.add=function(t){return this.container.add(t)},SlickUI.Element.DisplayObject.prototype.destroy=function(){this.container.destroy()},Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"x",{get:function(){return this._x-this.container.parent.x},set:function(t){this._x=t,this.container.displayGroup.x=this.container.parent.x+t-this._offsetX}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"y",{get:function(){return this._y-this.container.parent.y},set:function(t){this._y=t,this.container.displayGroup.y=this.container.parent.y+t-this._offsetY}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"visible",{get:function(){return this.container.displayGroup.visible},set:function(t){this.container.displayGroup.visible=t}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"alpha",{get:function(){return this.container.displayGroup.alpha},set:function(t){this.container.displayGroup.alpha=t}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"inputEnabled",{get:function(){return this.sprite.inputEnabled},set:function(t){this.sprite.inputEnabled=t,this.input=t?this.sprite.input:null}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"events",{get:function(){return this.sprite.events}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"width",{get:function(){return this.container.width},set:function(t){this._width=t,this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"height",{get:function(){return this.container.height},set:function(t){this._height=t,this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),SlickUI.namespace("Element"),SlickUI.Element.Panel=function(t,e,i,n){this._x=t,this._y=e,this._offsetX=t,this._offsetY=e,this._width=i,this._height=n,this.container=null},SlickUI.Element.Panel.prototype.setContainer=function(t){this.container=new SlickUI.Container.Container(t)},SlickUI.Element.Panel.prototype.unsetContainer=function(){this.container.removeParent()},SlickUI.Element.Panel.prototype.init=function(){var t=this.container.root.game.cache.getJSON("slick-ui-theme"),e=this.container.x=this.container.parent.x+this._x,i=this.container.y=this.container.parent.y+this._y,n=this.container.width=Math.min(this.container.parent.width-this._x,this._width),r=this.container.height=Math.min(this.container.parent.height-this._y,this._height);this.container.x+=Math.round(t.panel["border-x"]/2),this.container.y+=Math.round(t.panel["border-y"]/2),this.container.width-=t.panel["border-x"],this.container.height-=t.panel["border-y"],this._sprite=this.container.displayGroup.add(this.container.root.getRenderer("panel").render(n,r)),this._sprite.x=e,this._sprite.y=i,this._sprite.fixedToCamera=!0,this._offsetX=e,this._offsetY=i},SlickUI.Element.Panel.prototype.add=function(t){return this.container.add(t)},SlickUI.Element.Panel.prototype.remove=function(t){this.container.remove(t)},SlickUI.Element.Panel.prototype.destroy=function(){this.container.displayGroup.removeAll(!0),this.container.displayGroup.destroy(),this.container.children=[],this.container=void 0,this.sprite=void 0},Object.defineProperty(SlickUI.Element.Panel.prototype,"x",{get:function(){return this._x-this.container.parent.x},set:function(t){this._x=t,this.container.displayGroup.x=this.container.parent.x+t-this._offsetX}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"y",{get:function(){return this._y-this.container.parent.y},set:function(t){this._y=t,this.container.displayGroup.y=this.container.parent.y+t-this._offsetY}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"visible",{get:function(){return this.container.displayGroup.visible},set:function(t){this.container.displayGroup.visible=t}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"alpha",{get:function(){return this.container.displayGroup.alpha},set:function(t){this.container.displayGroup.alpha=t}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"width",{get:function(){return this.container.width},set:function(t){var e=this.container.root.game.cache.getJSON("slick-ui-theme");this._width=Math.round(t+e.panel["border-x"]),this._sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this._sprite)}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"height",{get:function(){return this.container.height},set:function(t){var e=this.container.root.game.cache.getJSON("slick-ui-theme");this._height=Math.round(t+e.panel["border-y"]),this._sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this._sprite)}}),SlickUI.namespace("Element.Renderer"),SlickUI.Element.Renderer.ButtonRenderer=function(t){this.game=t},SlickUI.Element.Renderer.ButtonRenderer.prototype.render=function(t,e){var i=this.game.cache.getJSON("slick-ui-theme"),n=this,r=function(r){var o=n.game.add.bitmapData(t,e);return o.copyRect(r,new Phaser.Rectangle(0,0,i.button["border-x"],i.button["border-y"])),o.copy(r,i.button["border-x"]+1,0,1,i.button["border-y"],i.button["border-x"],0,t-2*i.button["border-x"],i.button["border-y"]),o.copyRect(r,new Phaser.Rectangle(r.width-i.button["border-x"],0,i.button["border-x"],i.button["border-y"]),t-i.button["border-x"]),o.copy(r,0,i.button["border-y"]+1,i.button["border-x"],1,0,i.button["border-y"],i.button["border-x"],e-2*i.button["border-y"]),o.copy(r,r.width-i.button["border-x"],i.button["border-y"]+1,i.button["border-x"],1,t-i.button["border-x"],i.button["border-y"],i.button["border-x"],e-2*i.button["border-y"]),o.copyRect(r,new Phaser.Rectangle(0,r.height-i.button["border-y"],i.button["border-x"],i.button["border-y"]),0,e-i.button["border-y"]),o.copyRect(r,new Phaser.Rectangle(r.width-i.button["border-x"],r.height-i.button["border-y"],i.button["border-x"],i.button["border-y"]),t-i.button["border-x"],e-i.button["border-y"]),o.copy(r,i.button["border-x"]+1,r.height-i.button["border-y"],1,i.button["border-y"],i.button["border-x"],e-i.button["border-y"],t-2*i.button["border-x"],i.button["border-y"]),o.copy(r,i.button["border-x"],i.button["border-y"],1,1,i.button["border-x"],i.button["border-y"],t-2*i.button["border-x"],e-2*i.button["border-y"]),n.game.make.sprite(0,0,o)};return[r(this.game.make.sprite(0,0,"slick-ui-button_off")),r(this.game.make.sprite(0,0,"slick-ui-button_on"))]},SlickUI.namespace("Element.Renderer"),SlickUI.Element.Renderer.CheckboxRenderer=function(t){this.game=t},SlickUI.Element.Renderer.CheckboxRenderer.prototype.render=function(t){return[this.game.make.sprite(0,0,"slick-ui-"+t+"_off"),this.game.make.sprite(0,0,"slick-ui-"+t+"_on")]},SlickUI.namespace("Element.Renderer"),SlickUI.Element.Renderer.KeyboardRenderer=function(t){this.game=t},SlickUI.Element.Renderer.KeyboardRenderer.prototype.render=function(t){var e=this.game.make.bitmapData(this.game.width,t);return e.ctx.beginPath(),e.ctx.rect(0,0,this.game.width,t),e.ctx.fillStyle="#cccccc",e.ctx.fill(),e.ctx.beginPath(),e.ctx.rect(0,2,this.game.width,t-2),e.ctx.fillStyle="#f0f0f0",e.ctx.fill(),this.game.make.sprite(0,0,e)},SlickUI.namespace("Element.Renderer"),SlickUI.Element.Renderer.KeyRenderer=function(t){this.game=t},SlickUI.Element.Renderer.KeyRenderer.prototype.render=function(t,e){var i=this.game.make.graphics(0,0);i.beginFill(13619151),i.drawRoundedRect(0,0,t,e,5),i.beginFill(16777215),i.drawRoundedRect(1,1,t-2,e-2,5);var n=this.game.make.graphics(0,0);return n.beginFill(1542840),n.drawRoundedRect(0,0,t,e,5),n.beginFill(2074593),n.drawRoundedRect(1,1,t-2,e-2,5),[this.game.make.sprite(0,0,i.generateTexture()),this.game.make.sprite(0,0,n.generateTexture())]},SlickUI.namespace("Element.Renderer"),SlickUI.Element.Renderer.PanelRenderer=function(t){this.game=t},SlickUI.Element.Renderer.PanelRenderer.prototype.render=function(t,e){var i=this.game.cache.getJSON("slick-ui-theme"),n=this.game.add.bitmapData(this.game.width,this.game.height),r=this.game.make.sprite(0,0,"slick-ui-panel");return n.copyRect(r,new Phaser.Rectangle(0,0,i.panel["border-x"],i.panel["border-y"])),n.copy(r,i.panel["border-x"]+1,0,1,i.panel["border-y"],i.panel["border-x"],0,t-2*i.panel["border-x"],i.panel["border-y"]),n.copyRect(r,new Phaser.Rectangle(r.width-i.panel["border-x"],0,i.panel["border-x"],i.panel["border-y"]),t-i.panel["border-x"]),n.copy(r,0,i.panel["border-y"]+1,i.panel["border-x"],1,0,i.panel["border-y"],i.panel["border-x"],e-2*i.panel["border-y"]),n.copy(r,r.width-i.panel["border-x"],i.panel["border-y"]+1,i.panel["border-x"],1,t-i.panel["border-x"],i.panel["border-y"],i.panel["border-x"],e-2*i.panel["border-y"]),n.copyRect(r,new Phaser.Rectangle(0,r.height-i.panel["border-y"],i.panel["border-x"],i.panel["border-y"]),0,e-i.panel["border-y"]),n.copyRect(r,new Phaser.Rectangle(r.width-i.panel["border-x"],r.height-i.panel["border-y"],i.panel["border-x"],i.panel["border-y"]),t-i.panel["border-x"],e-i.panel["border-y"]),n.copy(r,i.panel["border-x"]+1,r.height-i.panel["border-y"],1,i.panel["border-y"],i.panel["border-x"],e-i.panel["border-y"],t-2*i.panel["border-x"],i.panel["border-y"]),n.copy(r,i.panel["border-x"],i.panel["border-y"],1,1,i.panel["border-x"],i.panel["border-y"],t-2*i.panel["border-x"],e-2*i.panel["border-y"]),this.game.make.sprite(0,0,n)},SlickUI.namespace("Element.Renderer"),SlickUI.Element.Renderer.SliderRenderer=function(t){this.game=t},SlickUI.Element.Renderer.SliderRenderer.prototype.render=function(t,e){this.game.cache.getJSON("slick-ui-theme");var i=this.game.make.sprite(0,0,"slick-ui-slider_base"),n=this.game.make.sprite(0,0,"slick-ui-slider_end"),r=this.game.add.bitmapData(t,n.height);r.copy(i,0,0,1,i.height,0,Math.round(n.height/4),t,i.height),r.copy(n,0,0,n.width,n.height,0,0,n.width,n.height),r.copy(n,0,0,n.width,n.height,t-n.width,0,n.width,n.height);var o=this.game.make.sprite(0,0,"slick-ui-slider_handle_off"),s=this.game.make.sprite(0,0,"slick-ui-slider_handle_on");return i=this.game.make.sprite(0,0,r),e&&(i.angle=90),[i,o,s]},SlickUI.namespace("Element.Renderer"),SlickUI.Element.Renderer.TextFieldRenderer=function(t){this.game=t},SlickUI.Element.Renderer.TextFieldRenderer.prototype.render=function(t,e){var i=this.game.cache.getJSON("slick-ui-theme"),n=this.game.add.bitmapData(t,e),r=this.game.make.sprite(0,0,"slick-ui-text_field");return n.copyRect(r,new Phaser.Rectangle(0,0,i.text_field["border-x"],i.text_field["border-y"])),n.copy(r,i.text_field["border-x"]+1,0,1,i.text_field["border-y"],i.text_field["border-x"],0,t-2*i.text_field["border-x"],i.text_field["border-y"]),n.copyRect(r,new Phaser.Rectangle(r.width-i.text_field["border-x"],0,i.text_field["border-x"],i.text_field["border-y"]),t-i.text_field["border-x"]),n.copy(r,0,i.text_field["border-y"]+1,i.text_field["border-x"],1,0,i.text_field["border-y"],i.text_field["border-x"],e-2*i.text_field["border-y"]),n.copy(r,r.width-i.text_field["border-x"],i.text_field["border-y"]+1,i.text_field["border-x"],1,t-i.text_field["border-x"],i.text_field["border-y"],i.text_field["border-x"],e-2*i.text_field["border-y"]),n.copyRect(r,new Phaser.Rectangle(0,r.height-i.text_field["border-y"],i.text_field["border-x"],i.text_field["border-y"]),0,e-i.text_field["border-y"]),n.copyRect(r,new Phaser.Rectangle(r.width-i.text_field["border-x"],r.height-i.text_field["border-y"],i.text_field["border-x"],i.text_field["border-y"]),t-i.text_field["border-x"],e-i.text_field["border-y"]),n.copy(r,i.text_field["border-x"]+1,r.height-i.text_field["border-y"],1,i.text_field["border-y"],i.text_field["border-x"],e-i.text_field["border-y"],t-2*i.text_field["border-x"],i.text_field["border-y"]),n.copy(r,i.text_field["border-x"],i.text_field["border-y"],1,1,i.text_field["border-x"],i.text_field["border-y"],t-2*i.text_field["border-x"],e-2*i.text_field["border-y"]),this.game.make.sprite(0,0,n)},SlickUI.namespace("Element"),SlickUI.Element.Slider=function(t,e,i,n,r){this._x=t,this._y=e,this._size=i,this._value=n,this._vertical=!0===r,this.container=null,void 0===n&&(this._value=1),this._vertical&&(this._value=Math.abs(this._value-1))},SlickUI.Element.Slider.prototype.setContainer=function(t){this.container=t},SlickUI.Element.Slider.prototype.unsetContainer=function(){this.container.removeParent()},SlickUI.Element.Slider.prototype.init=function(){this.container.root.game.cache.getJSON("slick-ui-theme");this.onDragStart=new Phaser.Signal,this.onDrag=new Phaser.Signal,this.onDragStop=new Phaser.Signal,this.displayGroup=game.add.group();var t=this.container.x+this._x,e=this.container.y+this._y,i=this._vertical?e:t,n=this._vertical?"y":"x",r=Math.min(this.container.width-this._x,this._size);this._vertical&&(r=Math.min(this.container.height-this._y,this._size));var o=Math.min(1,Math.max(0,this._value))*r+i,s=this.container.root.getRenderer("slider").render(r,this._vertical),h=s[0],a=s[1],d=s[2];h.x=t,h.y=e;var c=this.container.root.game.make.sprite(this._vertical?t:o,this._vertical?o:e,a.texture);c.anchor.setTo(.5),this._vertical&&(c.angle=270),h.fixedToCamera=!0,c.fixedToCamera=!0,c.inputEnabled=!0,c.input.useHandCursor=!0;var l=!1,p=function(){var t=(c.cameraOffset[n]-i)/r;return this._vertical&&(t=Math.abs(t-1)),t};c.events.onInputDown.add(function(){c.loadTexture(d.texture),l=!0,this.onDragStart.dispatch(p.apply(this))},this),c.events.onInputUp.add(function(){c.loadTexture(a.texture),l=!1,this.onDragStop.dispatch(p.apply(this))},this),this.container.root.game.input.addMoveCallback(function(t,e,o){if(l){var s=(this._vertical?o:e)-this.displayGroup[n];c.cameraOffset[n]=Math.min(i+r,Math.max(i,s-this.container.displayGroup[n])),this.onDrag.dispatch(p.apply(this))}},this),this.displayGroup.add(h),this.displayGroup.add(c),this.container.displayGroup.add(this.displayGroup)},SlickUI.Element.Slider.prototype.destroy=function(){this.container.destroy()},Object.defineProperty(SlickUI.Element.Slider.prototype,"x",{get:function(){return this.displayGroup.x+this._x},set:function(t){this.displayGroup.x=t-this._x}}),Object.defineProperty(SlickUI.Element.Slider.prototype,"y",{get:function(){return this.displayGroup.y+this._y},set:function(t){this.displayGroup.y=t-this._y}}),Object.defineProperty(SlickUI.Element.Slider.prototype,"alpha",{get:function(){return this.displayGroup.alpha},set:function(t){this.displayGroup.alpha=t}}),Object.defineProperty(SlickUI.Element.Slider.prototype,"visible",{get:function(){return this.displayGroup.visible},set:function(t){this.displayGroup.visible=t}}),SlickUI.namespace("Element"),SlickUI.Element.Text=function(t,e,i,n,r,o,s,h){this._x=t,this._y=e,this._value=i,this.width=s,this.height=h,this.font=o,this.size=n,this.fill=r,this.container=null},SlickUI.Element.Text.prototype.setContainer=function(t){this.container=t,void 0===this.width&&(this.width=this.container.root.game.width),void 0===this.height&&(this.height=this.container.root.game.height),void 0===this.size&&(this.size=20)},SlickUI.Element.Text.prototype.unsetContainer=function(){this.container.removeParent()},SlickUI.Element.Text.prototype.reset=function(t,e,i){var n;n=Math.min(this.container.width-t,this.width),Math.min(this.container.height-e,this.height),void 0!==this.text&&(!1===i&&(n=this.text.wordWrapWidth),this.text.destroy()),t+=this.container.x,e+=this.container.y;var r={font:this.font,fontSize:this.size,fill:this.fill};this.text=this.container.root.game.make.text(t,e,this._value,r),this.text.wordWrap=!0,this.text.wordWrapWidth=n,this.container.displayGroup.add(this.text),this.text.fixedToCamera=!0},SlickUI.Element.Text.prototype.init=function(){this.container.root.game.cache.getJSON("slick-ui-theme");void 0===this.font&&(this.font="Lato"),void 0===this.fill&&(this.fill=0),this.reset(this._x,this._y)},SlickUI.Element.Text.prototype.centerHorizontally=function(){return this.text.cameraOffset.x=this.text.wordWrapWidth/2-this.text.width/2+this.container.x,this},SlickUI.Element.Text.prototype.centerVertically=function(){this.container.root.game.cache.getJSON("slick-ui-theme");return this.text.cameraOffset.y=this.container.height/2-this.text.height/2+this.container.y,this},SlickUI.Element.Text.prototype.center=function(){return this.centerHorizontally(),this.centerVertically(),this},SlickUI.Element.Text.prototype.destroy=function(){this.container.destroy()},Object.defineProperty(SlickUI.Element.Text.prototype,"x",{get:function(){return this.text.cameraOffset.x-this.container.x},set:function(t){this.text.cameraOffset.x=t+this.container.x}}),Object.defineProperty(SlickUI.Element.Text.prototype,"y",{get:function(){return this.text.cameraOffset.y-this.container.y},set:function(t){this.text.cameraOffset.y=t+this.container.y}}),Object.defineProperty(SlickUI.Element.Text.prototype,"alpha",{get:function(){return this.text.alpha},set:function(t){this.text.alpha=t}}),Object.defineProperty(SlickUI.Element.Text.prototype,"visible",{get:function(){return this.text.visible},set:function(t){this.text.visible=t}}),Object.defineProperty(SlickUI.Element.Text.prototype,"value",{get:function(){return this.text.text},set:function(t){this.text.text=t}}),SlickUI.namespace("Element"),SlickUI.Element.TextField=function(t,e,i,n,r){void 0===r&&(r=7),this._x=t,this._y=e,this._offsetX=t,this._offsetY=e,this._width=i,this._height=n,this.maxChars=r,this.container=null,this.value="",this.events={onOK:new Phaser.Signal,onToggle:new Phaser.Signal,onKeyPress:new Phaser.Signal}},SlickUI.Element.TextField.prototype.setContainer=function(t){this.container=new SlickUI.Container.Container(t)},SlickUI.Element.TextField.prototype.unsetContainer=function(){this.container.removeParent()},SlickUI.Element.TextField.prototype.init=function(){var t=this.container.root.game.cache.getJSON("slick-ui-theme"),e=this.container.x=this.container.parent.x+this._x,i=this.container.y=this.container.parent.y+this._y,n=this.container.width=Math.min(this.container.parent.width-this._x,this._width),r=this.container.height=Math.min(this.container.parent.height-this._y,this._height);this.container.x+=Math.round(t.text_field["border-x"]/2),this.container.y+=Math.round(t.text_field["border-y"]/2),this.container.width-=t.text_field["border-x"],this.container.height-=t.text_field["border-y"],this.sprite=this.container.root.game.make.sprite(e,i,this.container.root.getRenderer("text_field").render(n,r).texture),this.sprite.inputEnabled=!0,this.sprite.input.useHandCursor=!0,this.container.displayGroup.add(this.sprite),this.sprite.x=e,this.sprite.y=i,this._offsetX=e,this._offsetY=i,this.sprite.fixedToCamera=!0;this.sprite.events.onInputOver.add(function(){!0},this),this.sprite.events.onInputOut.add(function(){!1},this);var o=new SlickUI.Keyboard.Keyboard(this.container.root,Object.keys(t.fonts)[Object.keys(t.fonts).length-1]);o.group.cameraOffset.y=this.container.root.game.height,o.group.visible=!1;var s=!1;this.sprite.events.onInputDown.add(function(){s||(s=!0,o.group.visible?(this.container.root.game.add.tween(o.group.cameraOffset).to({y:this.container.root.game.height},500,Phaser.Easing.Exponential.Out,!0).onComplete.add(function(){s=!1,o.group.visible=!1}),this.events.onToggle.dispatch(!1)):(o.group.visible=!0,this.container.root.game.add.tween(o.group.cameraOffset).to({y:this.container.root.game.height-o.height},500,Phaser.Easing.Exponential.Out,!0).onComplete.add(function(){s=!1}),this.events.onToggle.dispatch(!0)))},this),this.text=this.add(new SlickUI.Element.Text(8,0,"A")),this.text.centerVertically(),this.text.text.text=this.value,o.events.onKeyPress.add(function(t){this.value="DEL"==t?this.value.substr(0,this.value.length-1):(this.value+t).substr(0,this.maxChars),this.text.text.text=this.value,this.events.onKeyPress.dispatch(t)},this),o.events.onOK.add(function(){this.sprite.events.onInputDown.dispatch(),this.events.onOK.dispatch()},this)},SlickUI.Element.TextField.prototype.add=function(t){return this.container.add(t)},SlickUI.Element.TextField.prototype.destroy=function(){this.container.destroy()},Object.defineProperty(SlickUI.Element.TextField.prototype,"x",{get:function(){return this._x-this.container.parent.x},set:function(t){this._x=t,this.container.displayGroup.x=this.container.parent.x+t-this._offsetX}}),Object.defineProperty(SlickUI.Element.TextField.prototype,"y",{get:function(){return this._y-this.container.parent.y},set:function(t){this._y=t,this.container.displayGroup.y=this.container.parent.y+t-this._offsetY}}),Object.defineProperty(SlickUI.Element.TextField.prototype,"visible",{get:function(){return this.container.displayGroup.visible},set:function(t){this.container.displayGroup.visible=t}}),Object.defineProperty(SlickUI.Element.TextField.prototype,"alpha",{get:function(){return this.container.displayGroup.alpha},set:function(t){this.container.displayGroup.alpha=t}}),Object.defineProperty(SlickUI.Element.TextField.prototype,"width",{get:function(){return this.container.width},set:function(t){var e=this.container.root.game.cache.getJSON("slick-ui-theme");this._width=Math.round(t+e.text_field["border-x"]),this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),Object.defineProperty(SlickUI.Element.TextField.prototype,"height",{get:function(){return this.container.height},set:function(t){var e=this.container.root.game.cache.getJSON("slick-ui-theme");this._height=Math.round(t+e.text_field["border-y"]),this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),SlickUI.namespace("Keyboard"),SlickUI.Keyboard.Key=function(t,e,i,n,r,o,s,h){this.group=t.game.add.group(),this.font=o,this._x=e,this._y=i,this.plugin=t,this._width=n,this._height=r,this.fontSize=s,this.text=h},SlickUI.Keyboard.Key.prototype.init=function(){var t=this.plugin.getRenderer("key").render(this._width,this._height),e=t[0],i=t[1],n=this.plugin.game.make.sprite(this._x,this._y,e.texture),r=!1;n.inputEnabled=!0,n.input.useHandCursor=!0,n.events.onInputDown.add(function(){n.loadTexture(i.texture)}),n.events.onInputUp.add(function(){n.loadTexture(e.texture),r||n.events.onInputUp.halt()}),n.events.onInputOver.add(function(){r=!0},this),n.events.onInputOut.add(function(){r=!1},this);var o=this.plugin.game.make.bitmapText(this._x,this._y,this.font,this.text,this.fontSize);o.x+=this._width/2-o.width/2,o.y+=this._height/2-this.fontSize/2-4,this.group.add(n),this.group.add(o),this.events=n.events},SlickUI.namespace("Keyboard"),SlickUI.Keyboard.Keyboard=function(t,e,i,n){this.group=t.game.add.group(),this.keyGroupLower=t.game.make.group(),this.keyGroupUpper=t.game.make.group(),this.keyGroupCurrent=this.keyGroupLower,this.keyGroupUpper.visible=!1,this.group.fixedToCamera=!0,this.font=e,this.plugin=t,this.fontSize=i,this.height=160,this.events={onKeyPress:new Phaser.Signal,onOK:new Phaser.Signal},void 0===i&&(this.fontSize=16),!1!==n&&this.create()},SlickUI.Keyboard.Keyboard.prototype.create=function(){var t=this.plugin.getRenderer("keyboard").render(this.height);this.group.add(t),this.group.add(this.keyGroupLower),this.group.add(this.keyGroupUpper);var e=Math.round(this.plugin.game.width/2-220);this.addKey(new SlickUI.Keyboard.Key(this.plugin,e,16,32,32,this.font,this.fontSize,"1"),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+36,16,32,32,this.font,this.fontSize,"2"),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+72,16,32,32,this.font,this.fontSize,"3"),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+108,16,32,32,this.font,this.fontSize,"4"),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+144,16,32,32,this.font,this.fontSize,"5"),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+180,16,32,32,this.font,this.fontSize,"6"),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+216,16,32,32,this.font,this.fontSize,"7"),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+252,16,32,32,this.font,this.fontSize,"8"),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+288,16,32,32,this.font,this.fontSize,"9"),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+324,16,32,32,this.font,this.fontSize,"0"),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+360,16,64,32,this.font,this.fontSize,"DEL"),this.group),e+=16,this.addKey(new SlickUI.Keyboard.Key(this.plugin,e,52,32,32,this.font,this.fontSize,"q")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+36,52,32,32,this.font,this.fontSize,"w")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+72,52,32,32,this.font,this.fontSize,"e")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+108,52,32,32,this.font,this.fontSize,"r")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+144,52,32,32,this.font,this.fontSize,"t")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+180,52,32,32,this.font,this.fontSize,"y")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+216,52,32,32,this.font,this.fontSize,"u")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+252,52,32,32,this.font,this.fontSize,"i")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+288,52,32,32,this.font,this.fontSize,"o")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+324,52,32,32,this.font,this.fontSize,"p")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+360,52,32,32,this.font,this.fontSize,"!"),this.group),e+=16,this.addKey(new SlickUI.Keyboard.Key(this.plugin,e,88,32,32,this.font,this.fontSize,"a")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+36,88,32,32,this.font,this.fontSize,"s")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+72,88,32,32,this.font,this.fontSize,"d")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+108,88,32,32,this.font,this.fontSize,"f")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+144,88,32,32,this.font,this.fontSize,"g")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+180,88,32,32,this.font,this.fontSize,"h")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+216,88,32,32,this.font,this.fontSize,"j")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+252,88,32,32,this.font,this.fontSize,"k")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+288,88,32,32,this.font,this.fontSize,"l")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+324,88,80,32,this.font,this.fontSize,"UPPER")),e+=16,this.addKey(new SlickUI.Keyboard.Key(this.plugin,e-40,124,36,32,this.font,this.fontSize,"OK"),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e,124,32,32,this.font,this.fontSize,"z")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+36,124,32,32,this.font,this.fontSize,"x")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+72,124,32,32,this.font,this.fontSize,"c")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+108,124,32,32,this.font,this.fontSize,"v")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+144,124,32,32,this.font,this.fontSize,"b")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+180,124,32,32,this.font,this.fontSize,"n")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+216,124,32,32,this.font,this.fontSize,"m")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+252,124,32,32,this.font,this.fontSize,","),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+288,124,32,32,this.font,this.fontSize,"."),this.group),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+324,124,32,32,this.font,this.fontSize," "),this.group),e-=32,this.keyGroupCurrent=this.keyGroupUpper,this.addKey(new SlickUI.Keyboard.Key(this.plugin,e,52,32,32,this.font,this.fontSize,"Q")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+36,52,32,32,this.font,this.fontSize,"W")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+72,52,32,32,this.font,this.fontSize,"E")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+108,52,32,32,this.font,this.fontSize,"R")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+144,52,32,32,this.font,this.fontSize,"T")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+180,52,32,32,this.font,this.fontSize,"Y")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+216,52,32,32,this.font,this.fontSize,"U")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+252,52,32,32,this.font,this.fontSize,"I")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+288,52,32,32,this.font,this.fontSize,"O")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+324,52,32,32,this.font,this.fontSize,"P")),e+=16,this.addKey(new SlickUI.Keyboard.Key(this.plugin,e,88,32,32,this.font,this.fontSize,"A")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+36,88,32,32,this.font,this.fontSize,"S")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+72,88,32,32,this.font,this.fontSize,"D")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+108,88,32,32,this.font,this.fontSize,"F")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+144,88,32,32,this.font,this.fontSize,"G")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+180,88,32,32,this.font,this.fontSize,"H")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+216,88,32,32,this.font,this.fontSize,"J")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+252,88,32,32,this.font,this.fontSize,"K")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+288,88,32,32,this.font,this.fontSize,"L")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+324,88,80,32,this.font,this.fontSize,"lower")),e+=16,this.addKey(new SlickUI.Keyboard.Key(this.plugin,e,124,32,32,this.font,this.fontSize,"Z")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+36,124,32,32,this.font,this.fontSize,"X")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+72,124,32,32,this.font,this.fontSize,"C")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+108,124,32,32,this.font,this.fontSize,"V")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+144,124,32,32,this.font,this.fontSize,"B")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+180,124,32,32,this.font,this.fontSize,"N")),this.addKey(new SlickUI.Keyboard.Key(this.plugin,e+216,124,32,32,this.font,this.fontSize,"M"))},SlickUI.Keyboard.Keyboard.prototype.addKey=function(t,e){t.init(),void 0===e&&(e=this.keyGroupCurrent),e.add(t.group),t.events.onInputUp.add(function(){"UPPER"!=t.text&&"lower"!=t.text?"OK"!=t.text?this.events.onKeyPress.dispatch(t.text):this.events.onOK.dispatch():this.toggleMode()},this)},SlickUI.Keyboard.Keyboard.prototype.toggleMode=function(){this.keyGroupUpper.visible=!this.keyGroupUpper.visible,this.keyGroupLower.visible=!this.keyGroupLower.visible};